<!DOCTYPE html>
<html>
<meta charset = "utf-8"/>
<head>
	<title></title>
</head>
<body>
<h1>这是node2的页面</h1>

 <script type="text/javascript">
	// function ajax(){
		//1.使用jsonp进行跨域
		// let script = document.createElement("script");
		// script.src = "http://127.0.0.1:9000/public/javascript/abc.js?callback=callfunction";
		// document.getElementsByTagName('body')[0].appendChild(script);


		//2.使用cors进行跨域
		// let xhr = new XMLHttpRequest();

		// xhr.open("get","http://127.0.0.1:9000/public/javascript/abc.js?callback=callfunction");

		// xhr.send();

		// xhr.onreadystatechange = function(){
		// 	if(xhr.readystate == 4){
		// 		if(xhr.status == 200){
		// 			console.log(request.responseText);
		// 		}
		// 	}
		// }
		// xhr.onload = function(){
		// 	console.log("success....");
		// }

		// xhr.onerror = function(){
		// 	console.log("请求失败");
		// }

		//3.使用window.name+iframe进行跨域
		var iframe = document.createElement("iframe");
		

		var status = 0;

		var onloadfn = function(){
			if(status == 1){
				var data = iframe.contentWindow.name;
				alert(data);
			}
			if(status == 0){
				status = 1;
				iframe.contentWindow.location = "http://127.0.0.1:3000/public/proxy.html";//设置的代理文件
			}
		}

		iframe.src = "http://127.0.0.1:9000/public/abc.html";

		if(iframe.attachEvent){
			iframe.attachEvent("onload",onloadfn);
		}else if(iframe.addEventListener){
			iframe.addEventListener("load",onloadfn,true);
		}else{
			iframe.onload = onloadfn;
		}
		document.body.appendChild(iframe);
// }

	// function callfunction(data){
	// 	console.log(data);
	//  }
</script>
</body>
</html>